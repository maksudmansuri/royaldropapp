{% extends 'ecaadmin/admin_base.html' %}

{% block title %} Category Create{% endblock title %} 


{% block page_content %}

<div class="raw">
<div class="col-12 col-md-12 col-lg-12">
    <div class="card">
        <div class="card-header">
        <h4>Cetegory Update </h4>
        </div>
        <div class="card-body">
          
            
        <form method="post", enctype = "multipart/form-data">
        {% csrf_token %}
       
        {% for field in form %}
        <div class="form-group">
            {% if field.field.widget.input_type == "checkbox" %}
            <div class="article-cta">
                <label class="custom-switch mt-2" style="float:center">
                        <input type="checkbox" name="{{field.name}}" class="custom-switch-input update" id="{{field.name}}" {% if field.value == True %}checked{% endif %}> 
                        <span class="custom-switch-indicator"></span>
                        <span class="custom-switch-description">ACTIVE</span>
                </label>
            </div>              
            {% else %}            
                <label>{{ field.label}}</label>
                <input type="{{field.field.widget.input_type}}" name={{field.name}} id="{{field.name}}" class="form-control" value = "{{field.value}}">
            {% endif %}
           
            {% comment %} {% if field.field.widget.input_type == "select" %}
            <label>{{ field.label}}</label>
                <select  name={{field.name}} id="{{field.name}}" class="form-control" >
                    <option >select</option>
                {% for id,value in field.field.choices %}
                    {% if value == field.value  %}
                    <option value="{{id}}"selected >{{value}}</option>
                    
                    {% endif %}
                    <option value="{{id}}">{{value}}</option>
                {% endfor %}
                </select>
            
            {% endif %} {% endcomment %}
            {% if field.errors %}
                <div class = "alert alert-danger" style ="margin:10px;">
                {{field.errors }}
                </div>                

            {% endif %}
        </div>
        {% if field.field.widget.input_type == "file" %}
        <label>{{ field.label}}</label><br>

        <div class="card">
                  
                  <div class="card-body">
                    <img src="/media/{{field.value}}" style = "height:150px"/>z
                  </div>
                  
        </div>
               
            {% endif %}
        {% endfor %}
        <button href = "#" class = "btn btn-primary btn-block" type="submit" > SAVE SUBCATEGORY</button>    
    </div>
</div>
</div>
                


    


{% endblock page_content %}


{% block custom_js %}
<script>
//function myFunction() {
{% comment %} $('.update').on("click", function(){
    var checkBox = document.getElementById("myCheck");
    var form=new FormData($("#myform")[0]);
    if (checkBox.checked == true){
        console.log("inside if")
        open("POST","{% url 'category_active' category.id %}",true);
    } else {
        open("POST","{% url 'category_deactive' category.id %}",true);
    }
    xhr.send(form);
})
  
} {% endcomment %}
</script>
{% endblock custom_js %}
